<!DOCTYPE html>
<html>
  <head>
    <title>$(..).tooltip() demo</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script type="text/javascript">
      /*
       * Author: Jan Henning Thorsen - jhthorsen@cpan.org
       * Documentation: https://raw.github.com/jhthorsen/snippets/master/js/jquery.tooltip.html
       * Minified by http://jscompress.com
       */
       (function(e){var t=e(window);var n=!!("ontouchstart"in window);var r=function(e){var n=e.data.self.data("tooltip_element");t.unbind("resize",i);n.animate({opacity:0},70,function(){n.css("left","-2000px")});if(e.data.title)e.data.self.attr("title",e.data.title);e.data.tooltip_visible=false;return false};var i=function(n){var r=n.data.self;var s=r.attr("data-tooltip");var o,u,a,f,l;if(!s)return true;o=r.data("tooltip_element");u=r.offset();l=o.html(s).css("width","auto").outerWidth();if(n.data.max_width<l)l=n.data.max_width;if(t.width()<l)l=t.width()-n.data.margin*2;o.outerWidth(l);a=u.left+r.outerWidth()/2-l/2;f=u.top-o.outerHeight()-n.data.margin;if(a+l>t.width())a=t.width()-l-n.data.margin;if(a<0)a=n.data.margin;if(f<0)f=u.top+r.height()+n.data.margin;e("div."+n.data.class_name).css("z-index",n.data.z_index-1);if(n.data.tooltip_visible){o.css({left:a,top:f,"z-index":n.data.z_index})}else{n.data.title=r.attr("title");n.data.tooltip_visible=true;r.removeAttr("title");o.css({left:a,top:f,"z-index":n.data.z_index,opacity:0});o.animate({opacity:n.data.opacity},70);t.bind("resize",n.data,i)}return false};var s=function(e){return e.data.tooltip_visible?r(e):i(e)};e.fn.tooltip=function(o){return this.each(function(){var u=e.extend({},o||{});var a=e(this);if(a.data("tooltip_element"))return;if(!a.attr("data-tooltip"))a.attr("data-tooltip",a.attr("title")||"");if(typeof u.show_on_click=="undefined")u.show_on_click=n||!a.is("a");u.class_name=u.class_name||"tooltip";u.max_width=u.max_width||320;u.margin=u.margin||10;u.opacity=u.opacity||.95;u.z_index=u.z_index||1e3;u.self=a;a.data("tooltip_element",e('<div class="'+u.class_name+'"/>').css({position:"absolute",left:"-2000px"}).appendTo("body"));a.bind("show.tooltip",u,i);a.bind("hide.tooltip",u,r);a.bind("destroy.tooltip",function(){$tooltip.remove();t.unbind("resize",i);a.unbind("click",s).unbind("mouseenter",i).unbind("mouseleave",r).unbind("show.tooltip",i).unbind("hide.tooltip",r).unbind("destroy.tooltip")});if(u.show_on_click){a.data("tooltip_element").bind("click",u,r);a.bind("click",u,s)}else{a.bind("mouseenter",u,i);a.bind("mouseleave",u,r)}})}})(jQuery)
    </script>
    <style>
      div.tooltip {
        background: #333;
        color: #eee;
        font-size: 0.9em;
        border: 1px solid #111;
        border-radius: 4px;
        padding: 6px 10px;
        text-align: center;
      }
      a:hover {
        background: #eee;
      }
    </style>
    <script type="text/javascript">
      (function($) {
        $(document).ready(function() {
          $('a[data-tooltip]').tooltip();
          $('a[title]').tooltip({ show_on_click: true });
          $('.view-source').click(function(e) {
            window.location = 'view-source:' + window.location.href;
            return false;
          });
        });
      })(jQuery);
    </script>
  </head>
  <body>
    <h1>jQuery tooltip</h1>
    <p>
      This demo page show how to the browsers <code>title=""</code> support.
      Why does this page look so bad? It looks super bad to show how little is required to actually make the tooltip work.
      Want to see the actual code? Have a look at the
      <a href="view-source:https://raw.github.com/jhthorsen/snippets/master/js/jquery.tooltip.html" class="view-source">source code</a>.
    </p>

    <h2>Demo</h2>
    <a href="#mousenter" data-tooltip="This tooltip is displayed on mouseenter">Show on mouseenter</a>
    <a href="#click" title="This tooltip is toggled on click">Toggle on click</a>
    <a href="#long" data-tooltip="Super duper, duper, duper, duper, duper, duper, duper, duper, duper, duper, duper, duper, long tooltip">Long tip</a>
    <a href="#show_all" onClick="$('a').trigger('show.tooltip')">Show all tooltips</a>
    <a href="#hide_all" onClick="$('a').trigger('hide.tooltip')">Hide all tooltips</a>

    <h2>Code</h2>
    <p>
      <a href="view-source:https://raw.github.com/jhthorsen/snippets/master/js/jquery.tooltip.html" class="view-source">See minified version</a> (2.1kB)
    </p>
    <pre>
/*
 * Author: Jan Henning Thorsen - jhthorsen@cpan.org
 */
(function($) {
  var $win = $(window);
  var on_touch_device = !!('ontouchstart' in window);
  var hide = function(e) {
    var $tooltip = e.data.self.data('tooltip_element');
    $win.unbind('resize', show);
    $tooltip.animate({ opacity: 0 }, 70, function() { $tooltip.css('left', '-2000px'); });
    if(e.data.title) e.data.self.attr('title', e.data.title);
    e.data.tooltip_visible = false;
    return false;
  };
  var show = function(e) {
    var $self = e.data.self;
    var html = $self.attr('data-tooltip');
    var $tooltip, offset, left, top, width;

    if(!html) return true;

    $tooltip = $self.data('tooltip_element');
    offset = $self.offset();
    width = $tooltip.html(html).css('width', 'auto').outerWidth();

    if(e.data.max_width < width) width = e.data.max_width;
    if($win.width() < width) width = $win.width() - e.data.margin * 2;

    $tooltip.outerWidth(width);

    left = offset.left + $self.outerWidth() / 2 - width / 2;
    top = offset.top - $tooltip.outerHeight() - e.data.margin;

    if(left + width > $win.width()) left = $win.width() - width - e.data.margin;
    if(left < 0) left = e.data.margin;
    if(top < 0) top = offset.top + $self.height() + e.data.margin;

    $('div.' + e.data.class_name).css('z-index', e.data.z_index - 1);

    if(e.data.tooltip_visible) {
      $tooltip.css({ 'left': left, 'top': top, 'z-index': e.data.z_index });
    }
    else {
      e.data.title = $self.attr('title');
      e.data.tooltip_visible = true;
      $self.removeAttr('title');
      $tooltip.css({ 'left': left, 'top': top, 'z-index': e.data.z_index, 'opacity': 0 });
      $tooltip.animate({ opacity: e.data.opacity }, 70);
      $win.bind('resize', e.data, show);
    }

    return false;
  };
  var toggle = function(e) {
    return e.data.tooltip_visible ? hide(e) : show(e);
  };

  $.fn.tooltip = function(_args) {
    return this.each(function() {
      var args = $.extend({}, _args || {});
      var $self = $(this);

      if($self.data('tooltip_element')) return;
      if(!$self.attr('data-tooltip')) $self.attr('data-tooltip', $self.attr('title') || '');
      if(typeof args.show_on_click == 'undefined') args.show_on_click = on_touch_device || !$self.is('a');

      args.class_name = args.class_name || 'tooltip';
      args.max_width = args.max_width || 320;
      args.margin = args.margin || 10;
      args.opacity = args.opacity || 0.95;
      args.z_index = args.z_index || 1000;
      args.self = $self;

      $self.data('tooltip_element', $('&lt;div class="' + args.class_name + '"/>').css({ position: 'absolute', left: '-2000px' }).appendTo('body'));
      $self.bind('show.tooltip', args, show);
      $self.bind('hide.tooltip', args, hide);
      $self.bind('destroy.tooltip', function() {
        $tooltip.remove();
        $win.unbind('resize', show);
        $self
          .unbind('click', toggle)
          .unbind('mouseenter', show)
          .unbind('mouseleave', hide)
          .unbind('show.tooltip', show)
          .unbind('hide.tooltip', hide)
          .unbind('destroy.tooltip');
      });

      if(args.show_on_click) {
        $self.data('tooltip_element').bind('click', args, hide);
        $self.bind('click', args, toggle);
      }
      else {
        $self.bind('mouseenter', args, show);
        $self.bind('mouseleave', args, hide);
      }
    });
  };

})(jQuery);
    </pre>
  </body>
</html>
